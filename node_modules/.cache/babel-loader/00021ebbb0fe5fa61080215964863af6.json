{"ast":null,"code":"import _slicedToArray from \"/Users/mac/Documents/React/workspace/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/mac/Documents/React/workspace/src/FrontEnd/Components/abcd.js\";\nimport React, { PureComponent } from 'react';\nimport { Label, LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, ReferenceArea } from 'recharts';\nimport { DatePicker, Button } from 'antd';\nimport moment from 'moment';\nimport axios from 'axios';\nimport baseURL from '../Components/AxiosAPI';\nimport './abcd.css';\nconst dateFormat = 'YYYY-MM-DD';\nconst RangePicker = DatePicker.RangePicker;\nconst data = [{\n  name: 1,\n  cost: 4.11,\n  impression: 100\n}, {\n  name: 2,\n  cost: 2.39,\n  impression: 120\n}, {\n  name: 3,\n  cost: 1.37,\n  impression: 150\n}, {\n  name: 4,\n  cost: 1.16,\n  impression: 180\n}, {\n  name: 5,\n  cost: 2.29,\n  impression: 200\n}, {\n  name: 6,\n  cost: 3,\n  impression: 499\n}, {\n  name: 7,\n  cost: 0.53,\n  impression: 50\n}, {\n  name: 8,\n  cost: 2.52,\n  impression: 100\n}, {\n  name: 9,\n  cost: 1.79,\n  impression: 200\n}, {\n  name: 10,\n  cost: 2.94,\n  impression: 222\n}, {\n  name: 11,\n  cost: 4.3,\n  impression: 210\n}, {\n  name: 12,\n  cost: 4.41,\n  impression: 300\n}, {\n  name: 13,\n  cost: 2.1,\n  impression: 50\n}, {\n  name: 14,\n  cost: 8,\n  impression: 190\n}, {\n  name: 15,\n  cost: 0,\n  impression: 300\n}, {\n  name: 16,\n  cost: 9,\n  impression: 400\n}, {\n  name: 17,\n  cost: 3,\n  impression: 200\n}, {\n  name: 18,\n  cost: 2,\n  impression: 50\n}, {\n  name: 19,\n  cost: 3,\n  impression: 100\n}, {\n  name: 20,\n  cost: 7,\n  impression: 100\n}];\n\nconst getAxisYDomain = (from, to, ref, offset) => {\n  const refData = data.slice(from - 1, to);\n  let _ref = [refData[0][ref], refData[0][ref]],\n      bottom = _ref[0],\n      top = _ref[1];\n  refData.forEach(d => {\n    if (d[ref] > top) top = d[ref];\n    if (d[ref] < bottom) bottom = d[ref];\n  });\n  return [(bottom | 0) - offset, (top | 0) + offset];\n};\n\nconst initialState = {\n  data,\n  left: 'dataMin',\n  right: 'dataMax',\n  refAreaLeft: '',\n  refAreaRight: '',\n  top: 'dataMax+1',\n  bottom: 'dataMin-1',\n  top2: 'dataMax+20',\n  bottom2: 'dataMin-20',\n  animation: true,\n  incomedata: '',\n  expensedata: ''\n};\n\nclass Abc extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.updateDimensions = e => {\n      console.log(\"AreaChart updateDimensions\");\n      const _this$refDom = this.refDom,\n            clientWidth = _this$refDom.clientWidth,\n            clientHeight = _this$refDom.clientHeight;\n      console.log('====================================');\n      console.log(clientWidth, clientHeight, this.refDom);\n      console.log('====================================');\n      this.setState({\n        chartWidth: clientWidth\n      });\n    };\n\n    this.state = initialState;\n\n    this.saveRef = ref => {\n      this.refDom = ref;\n    };\n\n    this.updateDimensions = this.updateDimensions.bind(this);\n  }\n\n  zoom() {\n    let _this$state = this.state,\n        refAreaLeft = _this$state.refAreaLeft,\n        refAreaRight = _this$state.refAreaRight,\n        data = _this$state.data;\n\n    if (refAreaLeft === refAreaRight || refAreaRight === '') {\n      this.setState(() => ({\n        refAreaLeft: '',\n        refAreaRight: ''\n      }));\n      return;\n    } // xAxis domain\n\n\n    if (refAreaLeft > refAreaRight) {\n      var _ref2 = [refAreaRight, refAreaLeft];\n      refAreaLeft = _ref2[0];\n      refAreaRight = _ref2[1];\n    } // yAxis domain\n\n\n    const _getAxisYDomain = getAxisYDomain(refAreaLeft, refAreaRight, 'cost', 1),\n          _getAxisYDomain2 = _slicedToArray(_getAxisYDomain, 2),\n          bottom = _getAxisYDomain2[0],\n          top = _getAxisYDomain2[1];\n\n    const _getAxisYDomain3 = getAxisYDomain(refAreaLeft, refAreaRight, 'impression', 50),\n          _getAxisYDomain4 = _slicedToArray(_getAxisYDomain3, 2),\n          bottom2 = _getAxisYDomain4[0],\n          top2 = _getAxisYDomain4[1];\n\n    this.setState(() => ({\n      refAreaLeft: '',\n      refAreaRight: '',\n      data: data.slice(),\n      left: refAreaLeft,\n      right: refAreaRight,\n      bottom,\n      top,\n      bottom2,\n      top2\n    }));\n  }\n\n  zoomOut() {\n    const data = this.state.data;\n    this.setState(() => ({\n      data: data.slice(),\n      refAreaLeft: '',\n      refAreaRight: '',\n      left: 'dataMin',\n      right: 'dataMax',\n      top: 'dataMax+1',\n      bottom: 'dataMin',\n      top2: 'dataMax+50',\n      bottom: 'dataMin+50'\n    }));\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          data = _this$state2.data,\n          barIndex = _this$state2.barIndex,\n          left = _this$state2.left,\n          right = _this$state2.right,\n          refAreaLeft = _this$state2.refAreaLeft,\n          refAreaRight = _this$state2.refAreaRight,\n          top = _this$state2.top,\n          bottom = _this$state2.bottom,\n          top2 = _this$state2.top2,\n          bottom2 = _this$state2.bottom2;\n    return React.createElement(\"div\", {\n      className: \"highlight-bar-charts\",\n      style: {\n        userSelect: 'none'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(RangePicker, {\n      defaultValue: [moment(moment().add('day', -7).format('YYYY-MM-DD'), dateFormat), moment(moment().format('YYYY-MM-DD'), dateFormat)],\n      format: dateFormat,\n      onChange: this.DatePickerFunction.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }), React.createElement(Button, {\n      icon: \"zoom-in\",\n      href: \"javascript: void(0);\",\n      className: \"btn update\",\n      onClick: this.zoomOut.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(LineChart, {\n      width: 1500,\n      height: 700,\n      data: data,\n      onMouseDown: e => this.setState({\n        refAreaLeft: e.activeLabel\n      }),\n      onMouseMove: e => this.state.refAreaLeft && this.setState({\n        refAreaRight: e.activeLabel\n      }),\n      onMouseUp: this.zoom.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(CartesianGrid, {\n      strokeDasharray: \"3 3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }), React.createElement(XAxis, {\n      allowDataOverflow: true,\n      dataKey: \"\\u65E5\\u671F\",\n      domain: [left, right],\n      type: \"category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }), React.createElement(YAxis, {\n      allowDataOverflow: true,\n      domain: [bottom, top],\n      type: \"number\",\n      yAxisId: \"1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }), React.createElement(Tooltip, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }), React.createElement(Line, {\n      yAxisId: \"1\",\n      type: \"natural\",\n      dataKey: \"\\u71DF\\u696D\\u984D\",\n      stroke: \"#FF0000\",\n      animationDuration: 300,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }), refAreaLeft && refAreaRight ? React.createElement(ReferenceArea, {\n      yAxisId: \"1\",\n      x1: refAreaLeft,\n      x2: refAreaRight,\n      strokeOpacity: 0.3,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }) : null));\n  }\n\n  componentWillMount(e) {\n    window.addEventListener(\"resize\", this.updateDimensions);\n    console.log('componentWillMount');\n    axios.get(baseURL + '/ShopData/getRangeData', {\n      params: {\n        shopname: window.localStorage.getItem('shopname'),\n        branch: window.localStorage.getItem('branch'),\n        start: moment().add('day', -7).format('YYYY-MM-DD'),\n        end: moment().format('YYYY-MM-DD')\n      }\n    }).then(response => {\n      this.setState({\n        incomedata: response.data\n      });\n      console.log(this.state.incomedata);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentWillUnmount() {\n    console.log('componentWillUnmount');\n    window.removeEventListener(\"resize\", this.updateDimensions);\n  }\n\n  componentWillUpdate() {\n    console.log('componentWillUpdate');\n  }\n\n  DatePickerFunction(dates, dateStrings) {\n    axios.get(baseURL + '/ShopData/getIncomeData', {\n      params: {\n        shopname: window.localStorage.getItem('shopname'),\n        branch: window.localStorage.getItem('branch'),\n        start: dateStrings[0],\n        end: dateStrings[1]\n      }\n    }).then(response => {\n      this.setState({\n        incomedata: response.data\n      });\n      console.log(this.state.data);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n}\n\nAbc.jsfiddleUrl = 'https://jsfiddle.net/alidingling/nhpemhgs/';\nexport default Abc;","map":{"version":3,"sources":["/Users/mac/Documents/React/workspace/src/FrontEnd/Components/abcd.js"],"names":["React","PureComponent","Label","LineChart","Line","CartesianGrid","XAxis","YAxis","Tooltip","ReferenceArea","DatePicker","Button","moment","axios","baseURL","dateFormat","RangePicker","data","name","cost","impression","getAxisYDomain","from","to","ref","offset","refData","slice","bottom","top","forEach","d","initialState","left","right","refAreaLeft","refAreaRight","top2","bottom2","animation","incomedata","expensedata","Abc","constructor","props","updateDimensions","e","console","log","refDom","clientWidth","clientHeight","setState","chartWidth","state","saveRef","bind","zoom","zoomOut","render","barIndex","userSelect","add","format","DatePickerFunction","activeLabel","componentWillMount","window","addEventListener","get","params","shopname","localStorage","getItem","branch","start","end","then","response","catch","error","componentWillUnmount","removeEventListener","componentWillUpdate","dates","dateStrings","jsfiddleUrl"],"mappings":"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","sourcesContent":["import React, { PureComponent } from 'react';\nimport {\n  Label, LineChart, Line, CartesianGrid, XAxis, YAxis, Tooltip, ReferenceArea,\n} from 'recharts';\nimport { DatePicker, Button } from 'antd';\nimport moment from 'moment';\nimport axios from 'axios'\nimport baseURL from '../Components/AxiosAPI'\nimport './abcd.css'\nconst dateFormat = 'YYYY-MM-DD';\nconst { RangePicker } = DatePicker;\nconst data = [\n  { name: 1, cost: 4.11, impression: 100 },\n  { name: 2, cost: 2.39, impression: 120 },\n  { name: 3, cost: 1.37, impression: 150 },\n  { name: 4, cost: 1.16, impression: 180 },\n  { name: 5, cost: 2.29, impression: 200 },\n  { name: 6, cost: 3, impression: 499 },\n  { name: 7, cost: 0.53, impression: 50 },\n  { name: 8, cost: 2.52, impression: 100 },\n  { name: 9, cost: 1.79, impression: 200 },\n  { name: 10, cost: 2.94, impression: 222 },\n  { name: 11, cost: 4.3, impression: 210 },\n  { name: 12, cost: 4.41, impression: 300 },\n  { name: 13, cost: 2.1, impression: 50 },\n  { name: 14, cost: 8, impression: 190 },\n  { name: 15, cost: 0, impression: 300 },\n  { name: 16, cost: 9, impression: 400 },\n  { name: 17, cost: 3, impression: 200 },\n  { name: 18, cost: 2, impression: 50 },\n  { name: 19, cost: 3, impression: 100 },\n  { name: 20, cost: 7, impression: 100 },\n];\n\n\nconst getAxisYDomain = (from, to, ref, offset) => {\n  const refData = data.slice(from - 1, to);\n  let [bottom, top] = [refData[0][ref], refData[0][ref]];\n  refData.forEach((d) => {\n    if (d[ref] > top) top = d[ref];\n    if (d[ref] < bottom) bottom = d[ref];\n  });\n\n  return [(bottom | 0) - offset, (top | 0) + offset];\n};\n\nconst initialState = {\n  data,\n  left: 'dataMin',\n  right: 'dataMax',\n  refAreaLeft: '',\n  refAreaRight: '',\n  top: 'dataMax+1',\n  bottom: 'dataMin-1',\n  top2: 'dataMax+20',\n  bottom2: 'dataMin-20',\n  animation: true,\n  incomedata:'',\n  expensedata:''\n};\n\nclass Abc extends PureComponent {\n  static jsfiddleUrl = 'https://jsfiddle.net/alidingling/nhpemhgs/';\n\n  constructor(props) {\n    super(props);\n    this.state = initialState;\n\n    this.saveRef = ref => {this.refDom = ref};\n    this.updateDimensions = this.updateDimensions.bind(this)\n\n  }\n\n  zoom() {\n    let { refAreaLeft, refAreaRight, data } = this.state;\n\n    if (refAreaLeft === refAreaRight || refAreaRight === '') {\n      this.setState(() => ({\n        refAreaLeft: '',\n        refAreaRight: '',\n      }));\n      return;\n    }\n\n    // xAxis domain\n    if (refAreaLeft > refAreaRight) [refAreaLeft, refAreaRight] = [refAreaRight, refAreaLeft];\n\n    // yAxis domain\n    const [bottom, top] = getAxisYDomain(refAreaLeft, refAreaRight, 'cost', 1);\n    const [bottom2, top2] = getAxisYDomain(refAreaLeft, refAreaRight, 'impression', 50);\n\n    this.setState(() => ({\n      refAreaLeft: '',\n      refAreaRight: '',\n      data: data.slice(),\n      left: refAreaLeft,\n      right: refAreaRight,\n      bottom,\n      top,\n      bottom2,\n      top2,\n    }));\n  }\n\n  zoomOut() {\n    const { data } = this.state;\n    this.setState(() => ({\n      data: data.slice(),\n      refAreaLeft: '',\n      refAreaRight: '',\n      left: 'dataMin',\n      right: 'dataMax',\n      top: 'dataMax+1',\n      bottom: 'dataMin',\n      top2: 'dataMax+50',\n      bottom: 'dataMin+50',\n    }));\n  }\n\n  render() {\n    const {\n      data, barIndex, left, right, refAreaLeft, refAreaRight, top, bottom, top2, bottom2,\n    } = this.state;\n\n    return (\n      <div className=\"highlight-bar-charts\" style={{ userSelect: 'none' }}>\n        <RangePicker\n          defaultValue={[moment(moment().add('day',-7).format('YYYY-MM-DD'), dateFormat), moment(moment().format('YYYY-MM-DD'), dateFormat)]}\n          format={dateFormat}\n          onChange={this.DatePickerFunction.bind(this)}\n        />\n        <Button \n          icon=\"zoom-in\"\n          href=\"javascript: void(0);\"\n          className=\"btn update\"\n          onClick={this.zoomOut.bind(this)}\n        ></Button>\n        \n\n        <LineChart\n          width={1500}\n          height={700}\n          data={data}\n          onMouseDown={e => this.setState({ refAreaLeft: e.activeLabel })}\n          onMouseMove={e => this.state.refAreaLeft && this.setState({ refAreaRight: e.activeLabel })}\n          onMouseUp={this.zoom.bind(this)}\n        >\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis\n            allowDataOverflow\n            dataKey=\"日期\"\n            domain={[left, right]}\n            type=\"category\"\n          />\n          <YAxis\n            allowDataOverflow\n            domain={[bottom, top]}\n            type=\"number\"\n            yAxisId=\"1\"\n          />\n          \n          <Tooltip />\n          <Line yAxisId=\"1\" type=\"natural\" dataKey=\"營業額\" stroke=\"#FF0000\" animationDuration={300} />\n\n          {\n            (refAreaLeft && refAreaRight) ? (\n              <ReferenceArea yAxisId=\"1\" x1={refAreaLeft} x2={refAreaRight} strokeOpacity={0.3} />) : null\n            }\n        </LineChart>\n\n      </div>\n    );\n  }\n\n  componentWillMount(e) {\n    window.addEventListener(\"resize\", this.updateDimensions);\n\n    console.log('componentWillMount');\n    axios.get(baseURL+'/ShopData/getRangeData',\n      {\n        params: {\n          shopname : window.localStorage.getItem('shopname'),\n          branch : window.localStorage.getItem('branch'),\n          start:moment().add('day',-7).format('YYYY-MM-DD'),\n          end:moment().format('YYYY-MM-DD')\n        }\n      }\n    )\n    .then( (response) =>{\n      this.setState({incomedata:response.data})\n      \n      console.log(this.state.incomedata)\n    })\n    .catch(function (error) {\n      console.log(error);\n    }); \n  }\n  componentWillUnmount() {\n    console.log('componentWillUnmount');\n    window.removeEventListener(\"resize\", this.updateDimensions);\n  }\n  componentWillUpdate(){\n    console.log('componentWillUpdate');\n  }\n  DatePickerFunction(dates, dateStrings) {\n    axios.get(baseURL+'/ShopData/getIncomeData',\n      {\n        params: {\n          shopname : window.localStorage.getItem('shopname'),\n          branch : window.localStorage.getItem('branch'),\n          start:dateStrings[0],\n          end:dateStrings[1]\n        }\n      }\n    )\n    .then( (response) =>{\n      this.setState({incomedata:response.data})\n      console.log(this.state.data)\n    })\n    .catch(function (error) {\n      console.log(error);\n    }); \n    \n  }\n  updateDimensions = (e) => { \n    console.log(\"AreaChart updateDimensions\");\n    const {clientWidth, clientHeight} = this.refDom;\n    console.log('====================================');\n    console.log(clientWidth, clientHeight, this.refDom);\n    console.log('====================================');\n    this.setState({\n    chartWidth:clientWidth\n  });\n}\n}\n\nexport default Abc"]},"metadata":{},"sourceType":"module"}