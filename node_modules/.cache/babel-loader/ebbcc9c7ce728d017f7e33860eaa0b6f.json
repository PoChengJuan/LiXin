{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/React/workspace/src/FrontEnd/Components/Info.js\";\nimport React from 'react';\nimport { Drawer, DatePicker, Table, Button } from 'antd';\nimport axios from 'axios';\nimport baseURL from '../Components/AxiosAPI';\nimport moment from 'moment';\nimport './Info.css';\nconst dateFormat = 'YYYY-MM-DD';\nconst testDate = '2019-06-12';\nconst stock_columns = [{\n  title: '品項',\n  dataIndex: 'title',\n  key: 'title',\n  render: text => React.createElement(\"span\", {\n    style: {\n      color: '#1E90FF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, text)\n}, {\n  title: '庫存',\n  dataIndex: 'stock',\n  key: 'stock',\n  width: '2cm'\n}, {\n  title: '叫貨量',\n  dataIndex: 'order',\n  key: 'order',\n  width: '2cm'\n}];\nconst expense_columns = [{\n  title: '項目',\n  dataIndex: 'title',\n  key: 'title',\n  render: text => React.createElement(\"span\", {\n    style: {\n      color: '#1E90FF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, text)\n}, {\n  title: '金額',\n  dataIndex: 'cost',\n  key: 'cost',\n  width: '2cm'\n}];\nconst income_columns = [{\n  title: '',\n  dataIndex: 'title',\n  key: 'title',\n  render: text => React.createElement(\"span\", {\n    style: {\n      color: '#1E90FF'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, text)\n}, {\n  title: '金額',\n  dataIndex: 'income',\n  key: 'income',\n  width: '2cm'\n}];\nconst datedefault = [];\n\nclass Info extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.showDrawer = () => {\n      this.setState({\n        visible: true\n      });\n    };\n\n    this.onClose = () => {\n      this.setState({\n        visible: false\n      });\n    };\n\n    this.GetData = (shop, branch, date) => {\n      axios.get(baseURL + '/ShopData/getStock', {\n        params: {\n          shop: shop,\n          branch: branch,\n          date: date\n        }\n      }).then(response => {\n        this.setState({\n          data: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          data: ''\n        });\n        console.log(error);\n      });\n      axios.get(baseURL + '/ShopData/getExpense', {\n        params: {\n          shop: shop,\n          branch: branch,\n          date: date\n        }\n      }).then(response => {\n        this.setState({\n          expense: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          expense: ''\n        });\n        console.log(error);\n      });\n      axios.get(baseURL + '/ShopData/getIncome', {\n        params: {\n          shop: shop,\n          branch: branch,\n          date: date\n        }\n      }).then(response => {\n        this.setState({\n          income: response.data\n        });\n      }).catch(error => {\n        this.setState({\n          income: ''\n        });\n        console.log(error);\n      });\n      /*axios.get(baseURL+'/ShopData/getLastUploadDate',\n      {\n        params: {\n          shop: shop,\n          branch: branch\n        }\n      })\n      .then( (response) => {\n        this.setState({lastUploadDate:response.data});\n      })\n      .catch( (error) => {\n        console.log(error);\n      }); */\n    };\n\n    this.state = {\n      data: datedefault,\n      expense: datedefault,\n      income: datedefault,\n      lastUploadDate: testDate,\n      stockTableData: '',\n      date: '',\n      warning: true\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          data = _this$state.data,\n          expense = _this$state.expense;\n    return React.createElement(\"div\", {\n      className: \"Info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }, React.createElement(DatePicker, {\n      defaultValue: moment(this.state.date, dateFormat),\n      format: dateFormat,\n      onChange: this.DatePickerFunction.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77\n      },\n      __self: this\n    }), this.state.warning && React.createElement(Button, {\n      className: \"WarningBtn\",\n      type: \"danger\",\n      ghost: true,\n      onClick: this.onClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"\\u8B66\\u544A\"), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      style: {\n        marginBottom: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"\\u5EAB\\u5B58\"), React.createElement(Table, {\n      columns: stock_columns,\n      dataSource: data,\n      size: \"small\",\n      pagination: false,\n      scroll: {\n        y: 240\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      style: {\n        marginBottom: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"\\u652F\\u51FA\"), React.createElement(Table, {\n      columns: expense_columns,\n      dataSource: expense,\n      size: \"small\",\n      pagination: false,\n      scroll: {\n        y: 240\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"h3\", {\n      style: {\n        marginBottom: 16\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"\\u6536\\u5165\"), React.createElement(Table, {\n      columns: income_columns,\n      dataSource: this.state.income,\n      size: \"small\",\n      pagination: false,\n      scroll: {\n        y: 240\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(Drawer, {\n      title: \"Basic Drawer\",\n      placement: \"right\",\n      closable: false,\n      onClose: this.onClose,\n      visible: this.state.visible,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, \"Some contents...\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Some contents...\"), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \"Some contents...\")));\n  }\n\n  DatePickerFunction(dates, dateStrings) {\n    console.log(dateStrings);\n    window.localStorage.setItem(\"InfoPageDate\", dateStrings); //this.GetData(window.localStorage.getItem('shopname'),window.localStorage.getItem('branch'),dateStrings);\n\n    this.GetData(window.localStorage.getItem('shopname'), this.props.Branch, dateStrings);\n  }\n\n  componentWillUpdate() {//console.log('componentWillUpdate');\n  }\n\n  componentWillReceiveProps(nextProps) {//console.log(nextProps)\n  }\n\n  componentWillMount() {\n    //console.log('componentWillMount');\n    var date = window.localStorage.getItem('InfoPageDate');\n\n    if (date === null) {\n      this.GetData(window.localStorage.getItem('shopname'), //window.localStorage.getItem('branch'),\n      this.props.Branch, moment().format('YYYY-MM-DD'));\n      this.setState({\n        date: moment().format('YYYY-MM-DD')\n      });\n    } else {\n      this.GetData(window.localStorage.getItem('shopname'), //window.localStorage.getItem('branch'),\n      this.props.Branch, window.localStorage.getItem('InfoPageDate'));\n      this.setState({\n        date: window.localStorage.getItem('InfoPageDate')\n      });\n    }\n\n    axios.get(baseURL + '/ShopData/getWarning', {\n      params: {\n        shop: window.localStorage.getItem('shopname'),\n        branch: this.props.Branch,\n        page: 'Main'\n      }\n    }).then(response => {\n      this.props.warningUpdate(response.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }\n\n}\n\nexport default Info;","map":{"version":3,"sources":["/Users/mac/Documents/React/workspace/src/FrontEnd/Components/Info.js"],"names":["React","Drawer","DatePicker","Table","Button","axios","baseURL","moment","dateFormat","testDate","stock_columns","title","dataIndex","key","render","text","color","width","expense_columns","income_columns","datedefault","Info","Component","constructor","props","showDrawer","setState","visible","onClose","GetData","shop","branch","date","get","params","then","response","data","catch","error","console","log","expense","income","state","lastUploadDate","stockTableData","warning","DatePickerFunction","bind","onClick","marginBottom","y","dates","dateStrings","window","localStorage","setItem","getItem","Branch","componentWillUpdate","componentWillReceiveProps","nextProps","componentWillMount","format","page","warningUpdate"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Drawer,DatePicker,Table,Button } from 'antd';\nimport axios from 'axios'\nimport baseURL from '../Components/AxiosAPI'\nimport moment from 'moment';\n\nimport './Info.css'\n\nconst dateFormat = 'YYYY-MM-DD';\nconst testDate = '2019-06-12'\nconst stock_columns = [\n  {\n    title: '品項',\n    dataIndex: 'title',\n    key: 'title',\n    render: text => <span style={{color:'#1E90FF'}}>{text}</span>,\n  },\n  {\n    title: '庫存',\n    dataIndex: 'stock',\n    key: 'stock',\n    width:'2cm',\n  },\n  {\n    title: '叫貨量',\n    dataIndex: 'order',\n    key: 'order',\n    width:'2cm',\n  }\n];\nconst expense_columns = [\n  {\n    title: '項目',\n    dataIndex: 'title',\n    key: 'title',\n    render: text => <span style={{color:'#1E90FF'}}>{text}</span>,\n  },\n  {\n    title: '金額',\n    dataIndex: 'cost',\n    key: 'cost',\n    width:'2cm',\n  }\n];\nconst income_columns = [\n  {\n    title: '',\n    dataIndex: 'title',\n    key: 'title',\n    render: text => <span style={{color:'#1E90FF'}}>{text}</span>,\n  },\n  {\n    title: '金額',\n    dataIndex: 'income',\n    key: 'income',\n    width:'2cm',\n  }\n];\nconst datedefault = [];\nclass Info extends React.Component{\n    constructor(props){\n        super(props);\n        this.state = {\n          data:datedefault,\n          expense:datedefault,\n          income:datedefault,\n          lastUploadDate:testDate,\n          stockTableData:'',\n          date:'',\n          warning:true\n        }      \n      }\n    render(){\n      const{data,expense}=this.state\n        return(\n            <div className='Info'>\n                <DatePicker\n                  defaultValue={moment(this.state.date, dateFormat)} \n                  format={dateFormat} \n                  onChange={this.DatePickerFunction.bind(this)}\n                  />\n                  {\n                    this.state.warning &&\n                    <Button className='WarningBtn' type='danger' ghost onClick={this.onClick}>警告</Button>\n                  }\n                <h2>{\n                  //this.state.lastUploadDate\n                  }</h2>\n                <h3 style={{ marginBottom: 16 }}>庫存</h3>\n                <Table columns={stock_columns} dataSource={data} size='small' pagination={false} scroll={{ y: 240 }} />\n                <h3 style={{ marginBottom: 16 }}>支出</h3>\n                <Table columns={expense_columns} dataSource={expense} size='small' pagination={false} scroll={{ y: 240 }} />\n                <h3 style={{ marginBottom: 16 }}>收入</h3>\n                <Table columns={income_columns} dataSource={this.state.income} size='small' pagination={false} scroll={{ y: 240 }} />\n                <Drawer\n                  title=\"Basic Drawer\"\n                  placement=\"right\"\n                  closable={false}\n                  onClose={this.onClose}\n                  visible={this.state.visible}\n                >\n                  <p>Some contents...</p>\n                  <p>Some contents...</p>\n                  <p>Some contents...</p>\n                </Drawer>\n            </div>\n              \n        )\n    }\n    showDrawer = () => {\n      this.setState({\n        visible: true,\n      });\n    };\n  \n    onClose = () => {\n      this.setState({\n        visible: false,\n      });\n    };\n    DatePickerFunction(dates, dateStrings) {\n      console.log(dateStrings)\n      window.localStorage.setItem(\"InfoPageDate\",dateStrings)\n      //this.GetData(window.localStorage.getItem('shopname'),window.localStorage.getItem('branch'),dateStrings);\n      this.GetData(window.localStorage.getItem('shopname'),this.props.Branch,dateStrings);\n    }\n    componentWillUpdate(){\n      //console.log('componentWillUpdate');\n\n    }\n    componentWillReceiveProps(nextProps){\n      //console.log(nextProps)\n    }\n    componentWillMount() {\n        //console.log('componentWillMount');\n        var date = window.localStorage.getItem('InfoPageDate') \n        if(date === null){\n          this.GetData(\n            window.localStorage.getItem('shopname'),\n            //window.localStorage.getItem('branch'),\n            this.props.Branch,\n            moment().format('YYYY-MM-DD')\n            );\n            this.setState({date:moment().format('YYYY-MM-DD')})\n        }else{\n          this.GetData(\n            window.localStorage.getItem('shopname'),\n            //window.localStorage.getItem('branch'),\n            this.props.Branch,\n            window.localStorage.getItem('InfoPageDate')\n            );\n            this.setState({date:window.localStorage.getItem('InfoPageDate')})\n        }\n        axios.get(baseURL+'/ShopData/getWarning',\n            {\n              params: {\n                shop : window.localStorage.getItem('shopname'),\n                branch : this.props.Branch,\n                page: 'Main'\n              }\n            }\n          )\n          .then( (response) =>{\n          this.props.warningUpdate(response.data);\n        })\n        .catch( (error) => {\n          console.log(error);\n        }); \n      }\n      GetData = (shop,branch,date) =>{\n        axios.get(baseURL+'/ShopData/getStock',\n            {\n              params: {\n                shop : shop,\n                branch : branch,\n                date: date\n              }\n            }\n          )\n          .then( (response) =>{\n          this.setState({data:response.data});\n        })\n        .catch( (error) => {\n          this.setState({data:''});\n          console.log(error);\n        }); \n        \n        axios.get(baseURL+'/ShopData/getExpense',\n        {\n          params: {\n            shop: shop,\n            branch: branch,\n            date: date\n          }\n        })\n        .then( (response) => {\n          this.setState({expense:response.data});\n        })\n        .catch( (error) => {\n          this.setState({expense:''});\n          console.log(error);\n        }); \n        \n        axios.get(baseURL+'/ShopData/getIncome',\n        {\n          params: {\n            shop: shop,\n            branch: branch,\n            date: date\n          }\n        })\n        .then( (response) => {\n          this.setState({income:response.data});\n        })\n        .catch( (error) => {\n          this.setState({income:''});\n          console.log(error);\n        }); \n        /*axios.get(baseURL+'/ShopData/getLastUploadDate',\n        {\n          params: {\n            shop: shop,\n            branch: branch\n          }\n        })\n        .then( (response) => {\n          this.setState({lastUploadDate:response.data});\n        })\n        .catch( (error) => {\n          console.log(error);\n        }); */\n      }\n}\n\nexport default Info\n"]},"metadata":{},"sourceType":"module"}