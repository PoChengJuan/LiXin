{"ast":null,"code":"var _jsxFileName = \"/Users/mac/Documents/React/LiXin/src/FrontEnd/Container/Login.js\";\nimport React from 'react';\nimport { Layout, Row, Col } from 'antd';\nimport CSILogo from '../png/Logo.png';\nimport '../../App.css';\nimport './Login.css';\nimport axios from 'axios';\nimport md5 from 'md5';\nimport { Redirect } from \"react-router-dom\";\nimport baseURL from '../Components/AxiosAPI';\nimport LoginForm from '../Components/LoginForm'; //const { Title } = Typography;\n\nconst Header = Layout.Header,\n      Content = Layout.Content;\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAuth: '',\n      userInput: '',\n      pwInput: '',\n      Name: '',\n      Password: '',\n      Permission: '',\n      ShopName: '',\n      Branch: ''\n    };\n  }\n\n  UserHandle(e) {\n    this.setState({\n      userInput: e.target.value\n    });\n  }\n\n  PSHandle(e) {\n    this.setState({\n      pwInput: e.target.value\n    });\n  }\n\n  LoginFunction(user, pw) {\n    //axios.get('http://localhost:8080/User/getMember?name='+this.state.userInput)\n    axios.get(baseURL + '/User/getMember', {\n      params: {\n        //name : this.state.userInput\n        name: user //,password : md5(this.state.pwInput)\n        ,\n        password: md5(pw)\n      }\n    }).then(response => {\n      for (var index in response.data[0]) {\n        if (index === 'auto_increment') {\n          window.sessionStorage.setItem('auto_increment', response.data[0][index]);\n        }\n\n        if (index === 'name') {\n          this.setState({\n            Name: response.data[0][index]\n          });\n          window.localStorage.setItem('name', response.data[0][index]);\n        }\n\n        if (index === 'password') {\n          this.setState({\n            Password: response.data[0][index]\n          });\n        }\n\n        if (index === 'permission') {\n          this.setState({\n            Permission: response.data[0][index]\n          });\n          window.sessionStorage.setItem('permission', response.data[0][index]);\n        }\n\n        if (index === 'shopname') {\n          this.setState({\n            ShopName: response.data[0][index]\n          });\n          window.localStorage.setItem('shopname', response.data[0][index]);\n        }\n\n        if (index === 'branch') {\n          this.setState({\n            Branch: response.data[0][index]\n          });\n          window.localStorage.setItem('branch', response.data[0][index]);\n        }\n\n        if (index === 'lastupload') {\n          //this.setState({Branch:response.data[0][index]});\n          window.sessionStorage.setItem('lastupload', response.data[0][index]);\n        }\n      }\n\n      if (md5(pw) === this.state.Password) {\n        window.sessionStorage.setItem('isAuth', 'true');\n        this.setState({\n          isAuth: 'true'\n        });\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  render() {\n    //let { from } = this.props.location.state || { from: { pathname: \"/\" } };\n    //let { redirectToReferrer } = this.state;\n    const isAuth = this.state.isAuth;\n\n    if (isAuth === 'true') {\n      console.log(\"OK\");\n\n      if (window.sessionStorage.getItem('permission') >= 9) {\n        console.log('main');\n        return React.createElement(Redirect, {\n          to: 'Main',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        });\n      } else {\n        console.log('stock');\n        return React.createElement(Redirect, {\n          to: 'User',\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        });\n      }\n    }\n\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(Layout, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(Header, {\n      className: \"Header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(Col, {\n      span: 24,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(Content, {\n      className: \"Content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"LoginContent\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: CSILogo,\n      alt: \"CSILogo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(LoginForm, {\n      userInput: this.state.userInput,\n      pwInput: this.state.pwInput,\n      submit: this.LoginFunction.bind(this),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }))))))));\n  }\n\n  componentWillMount() {\n    this.setState({\n      isAuth: window.sessionStorage.getItem('isAuth')\n    });\n  }\n\n}\n\nfunction LoginPage() {\n  return React.createElement(Login, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  });\n}\n\nexport default LoginPage;","map":{"version":3,"sources":["/Users/mac/Documents/React/LiXin/src/FrontEnd/Container/Login.js"],"names":["React","Layout","Row","Col","CSILogo","axios","md5","Redirect","baseURL","LoginForm","Header","Content","Login","Component","constructor","props","state","isAuth","userInput","pwInput","Name","Password","Permission","ShopName","Branch","UserHandle","e","setState","target","value","PSHandle","LoginFunction","user","pw","get","params","name","password","then","response","index","data","window","sessionStorage","setItem","localStorage","catch","error","console","log","render","getItem","bind","componentWillMount","LoginPage"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {Layout, Row, Col } from 'antd';\nimport CSILogo from '../png/Logo.png';\nimport '../../App.css'\nimport './Login.css'\nimport axios from 'axios'\nimport md5 from 'md5'\nimport {Redirect} from \"react-router-dom\";\nimport baseURL from '../Components/AxiosAPI'\nimport LoginForm from '../Components/LoginForm'\n//const { Title } = Typography;\nconst {\n  Header, Content,\n} = Layout;\n\n\nclass Login extends React.Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      isAuth:'',\n      userInput: '',\n      pwInput: '',\n      Name:'',\n      Password:'',\n      Permission:'',\n      ShopName:'',\n      Branch:''}\n      \n  }\n  UserHandle(e){\n    this.setState({userInput: e.target.value});\n  }\n  PSHandle(e){\n    this.setState({pwInput: e.target.value});\n  }\n  LoginFunction(user , pw){\n    //axios.get('http://localhost:8080/User/getMember?name='+this.state.userInput)\n    axios.get(baseURL+'/User/getMember',\n    {params: {\n      //name : this.state.userInput\n      name : user\n      //,password : md5(this.state.pwInput)\n      ,password : md5(pw)}}\n      )\n    .then( (response) =>{\n      for(var index in response.data[0]) {\n        if(index==='auto_increment'){\n          window.sessionStorage.setItem('auto_increment',response.data[0][index]);\n        }\n        if(index==='name'){\n          this.setState({Name:response.data[0][index]});\n          window.localStorage.setItem('name',response.data[0][index]);\n        }\n        if(index==='password'){\n          this.setState({Password:response.data[0][index]});        \n        }\n        if(index==='permission'){\n          this.setState({Permission:response.data[0][index]});\n          window.sessionStorage.setItem('permission',response.data[0][index]);\n        }\n        if(index==='shopname'){\n          this.setState({ShopName:response.data[0][index]});\n          window.localStorage.setItem('shopname',response.data[0][index]);\n\n        }\n        if(index==='branch'){\n          this.setState({Branch:response.data[0][index]});\n          window.localStorage.setItem('branch',response.data[0][index]);\n        }\n        if(index==='lastupload'){\n          //this.setState({Branch:response.data[0][index]});\n          window.sessionStorage.setItem('lastupload',response.data[0][index]);\n        }\n\n      } \n      if(md5(pw) === this.state.Password){\n        window.sessionStorage.setItem('isAuth','true');  \n        this.setState({isAuth:'true'});\n      }\n      \n    })\n    .catch(function (error) {\n      console.log(error);\n    });\n    \n  }\n  render(){\n    //let { from } = this.props.location.state || { from: { pathname: \"/\" } };\n    //let { redirectToReferrer } = this.state;\n    const { isAuth } = this.state;\n    if(isAuth === 'true'){\n      console.log(\"OK\")\n      if(window.sessionStorage.getItem('permission') >= 9){\n        console.log('main')\n        return <Redirect to={'Main'} />\n      }else{\n        console.log('stock')\n        return <Redirect to={'User'} />\n      }\n    }\n    return(\n      <div className=\"App\">\n        <Row>\n          <Layout >\n            <Col span={24}>\n              <Header className=\"Header\">\n              </Header>\n            </Col>\n            <Col span={24}>\n              <Content className=\"Content\">\n                <div className=\"LoginContent\">\n                  <img src={CSILogo} alt='CSILogo' />\n                  <div>\n                    <LoginForm userInput = {this.state.userInput} pwInput = {this.state.pwInput} submit = {this.LoginFunction.bind(this)} />\n                  </div>\n                </div>\n              </Content>\n            </Col>\n          </Layout>\n        </Row>\n      </div>\n    )\n  }\n  componentWillMount() {\n    this.setState({isAuth:window.sessionStorage.getItem('isAuth')});   \n  }\n}\n\n\n\n\n\nfunction LoginPage() {\n  \n  return (\n    <Login />\n  );\n}\nexport default LoginPage;\n"]},"metadata":{},"sourceType":"module"}