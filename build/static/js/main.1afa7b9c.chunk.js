(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{117:function(e,t,a){},135:function(e,t,a){e.exports=a.p+"static/media/Logo.7405eedf.png"},324:function(e,t,a){e.exports=a(625)},329:function(e,t,a){},330:function(e,t,a){},351:function(e,t,a){},449:function(e,t,a){},450:function(e,t,a){},616:function(e,t,a){},617:function(e,t,a){},618:function(e,t,a){},619:function(e,t,a){},620:function(e,t,a){},621:function(e,t,a){},622:function(e,t,a){},623:function(e,t,a){},625:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(10),s=a.n(l),c=(a(329),a(117),a(46)),r=a(82),i=a(25),m=a(23),d=a(28),h=a(26),u=a(27),p=a(626),g=a(627),f=a(628),S=a(135),w=a.n(S),E=(a(330),a(19)),y=a.n(E),b=a(197),k=a.n(b),D="http://114.35.249.80:8080",I=a(634),v=a(636),Y=a(11),M=a(74),O=(a(351),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){e||(console.log("Received values of form: ",t),a.props.submit(t.username,t.password))})},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return o.a.createElement(I.a,{onSubmit:this.handleSubmit,className:"login-form"},o.a.createElement(I.a.Item,null,e("username",{rules:[{required:!0,message:"Please input your username!"}]})(o.a.createElement(v.a,{prefix:o.a.createElement(Y.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),autoFocus:!0,placeholder:"Username"}))),o.a.createElement(I.a.Item,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(o.a.createElement(v.a,{prefix:o.a.createElement(Y.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),o.a.createElement(I.a.Item,null,o.a.createElement(M.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in")))}}]),t}(o.a.Component)),x=I.a.create({name:"normal_login"})(O),j=p.a.Header,F=p.a.Content,P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={isAuth:"",userInput:"",pwInput:"",Name:"",Password:"",Permission:"",ShopName:"",Branch:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"UserHandle",value:function(e){this.setState({userInput:e.target.value})}},{key:"PSHandle",value:function(e){this.setState({pwInput:e.target.value})}},{key:"LoginFunction",value:function(e,t){var a=this;y.a.get(D+"/User/getMember",{params:{name:e,password:k()(t)}}).then(function(e){for(var n in e.data[0])"auto_increment"===n&&window.sessionStorage.setItem("auto_increment",e.data[0][n]),"name"===n&&(a.setState({Name:e.data[0][n]}),window.localStorage.setItem("name",e.data[0][n])),"password"===n&&a.setState({Password:e.data[0][n]}),"permission"===n&&(a.setState({Permission:e.data[0][n]}),window.sessionStorage.setItem("permission",e.data[0][n])),"shopname"===n&&(a.setState({ShopName:e.data[0][n]}),window.localStorage.setItem("shopname",e.data[0][n])),"branch"===n&&(a.setState({Branch:e.data[0][n]}),window.localStorage.setItem("branch",e.data[0][n])),"lastupload"===n&&window.sessionStorage.setItem("lastupload",e.data[0][n]);k()(t)===a.state.Password&&(window.sessionStorage.setItem("isAuth","true"),a.setState({isAuth:"true"}))}).catch(function(e){console.log(e)})}},{key:"render",value:function(){return"true"===this.state.isAuth?(console.log("OK"),window.sessionStorage.getItem("permission")>=9?(console.log("main"),o.a.createElement(r.a,{to:"Main"})):(console.log("stock"),o.a.createElement(r.a,{to:"User"}))):o.a.createElement("div",{className:"App"},o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(f.a,{span:24},o.a.createElement(j,{className:"Header"})),o.a.createElement(f.a,{span:24},o.a.createElement(F,{className:"Content"},o.a.createElement("div",{className:"LoginContent"},o.a.createElement("img",{src:w.a,alt:"CSILogo"}),o.a.createElement("div",null,o.a.createElement(x,{userInput:this.state.userInput,pwInput:this.state.pwInput,submit:this.LoginFunction.bind(this)}))))))))}},{key:"componentWillMount",value:function(){this.setState({isAuth:window.sessionStorage.getItem("isAuth")})}}]),t}(o.a.Component);var C=function(){return o.a.createElement(P,null)},B=a(149),U=a(204),W=(a(449),a(71)),N=a(633),L=(a(450),a(15)),A=a(632),K=a(8),H=a.n(K),_=A.a.RangePicker,z=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=e.stroke,l=e.value;return o.a.createElement("text",{x:t,y:a,dy:-4,fill:n,fontSize:10,textAnchor:"middle"},l)}}]),t}(o.a.Component),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.updateDimensions=function(e){console.log("AreaChart updateDimensions");var t=a.refDom,n=t.clientWidth,o=t.clientHeight;console.log("===================================="),console.log(n,o,a.refDom),console.log("===================================="),a.setState({chartWidth:n})},a.state={data:[],startDate:H()().add("day",-7).format("YYYY-MM-DD"),endDate:H()().format("YYYY-MM-DD"),chartWidth:a.props.Width,chartHeight:500},a.saveRef=function(e){a.refDom=e},a.updateDimensions=a.updateDimensions.bind(Object(W.a)(a)),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.sortedInfo,t=[{title:"\u65e5\u671f",dataIndex:"\u65e5\u671f",key:"\u65e5\u671f",width:"10%"},{title:"\u71df\u696d\u984d",dataIndex:"\u71df\u696d\u984d",key:"\u71df\u696d\u984d",width:"30%",defaultSortOrder:"descend",sorter:function(e,t){return e.\u71df\u696d\u984d-t.\u71df\u696d\u984d},sortOrder:"\u71df\u696d\u984d"===(e=e||{}).columnKey&&e.order},{title:"\u9032\u8ca8\u652f\u51fa",dataIndex:"\u9032\u8ca8\u652f\u51fa",key:"\u9032\u8ca8\u652f\u51fa",width:"30%",sorter:function(e,t){return e.\u9032\u8ca8\u652f\u51fa-t.\u9032\u8ca8\u652f\u51fa},sortOrder:"\u9032\u8ca8\u652f\u51fa"===e.columnKey&&e.order},{title:"\u96dc\u652f",dataIndex:"\u96dc\u652f",key:"\u96dc\u652f",width:"30%",sorter:function(e,t){return e.\u96dc\u652f-t.\u96dc\u652f},sortOrder:"\u96dc\u652f"===e.columnKey&&e.order}];return o.a.createElement(g.a,null,o.a.createElement(f.a,{span:24},o.a.createElement("div",{ref:this.saveRef},o.a.createElement(_,{defaultValue:[H()(this.state.startDate,"YYYY-MM-DD"),H()(this.state.endDate,"YYYY-MM-DD")],format:"YYYY-MM-DD",onChange:this.DatePickerFunction.bind(this)}),o.a.createElement(L.f,{width:this.state.chartWidth,height:this.state.chartHeight,data:this.state.data,margin:{top:20,right:30,left:20,bottom:10}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"\u65e5\u671f"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.e,{type:"monotone",dataKey:"\u71df\u696d\u984d",stroke:"#0066FF",label:o.a.createElement(z,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:"\u9032\u8ca8\u652f\u51fa",stroke:"#77FF00",label:o.a.createElement(z,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:"\u96dc\u652f",stroke:"#FF8800",label:o.a.createElement(z,null)})),o.a.createElement(N.a,{columns:t,dataSource:this.state.data,size:"small",pagination:!1,scroll:{y:240},onChange:this.handleChange}))))}},{key:"DatePickerFunction",value:function(e,t){var a=this;window.localStorage.setItem("BalancePageDate_Start",t[0]),window.localStorage.setItem("BalancePageDate_End",t[1]),y.a.get(D+"/ShopData/getIncomeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:t[0],end:t[1]}}).then(function(e){a.setState({data:e.data}),console.log(a.state.data)}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(e){var t=this;window.addEventListener("resize",this.updateDimensions);var a=window.localStorage.getItem("BalancePageDate_Start"),n=window.localStorage.getItem("BalancePageDate_End");console.log(a+"\u548c"+n),null===a||null===n?y.a.get(D+"/ShopData/getIncomeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:H()().add("day",-6).format("YYYY-MM-DD"),end:H()().format("YYYY-MM-DD")}}).then(function(e){t.setState({data:e.data,startDate:H()().add("day",-6).format("YYYY-MM-DD"),endDate:H()().format("YYYY-MM-DD")}),console.log(t.state.data)}).catch(function(e){console.log(e)}):(y.a.get(D+"/ShopData/getIncomeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:a,end:n}}).then(function(e){t.setState({data:e.data}),console.log(t.state.data)}).catch(function(e){console.log(e)}),this.setState({startDate:a,endDate:n})),console.log("componentWillMount")}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.updateDimensions)}},{key:"componentWillUpdate",value:function(){console.log("componentWillUpdate")}}]),t}(o.a.Component),R=a(635),T=a(639),G=R.a.Text,q=R.a.Title,J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).showDrawer=function(){a.setState({visible:!0})},a.onClose=function(){a.setState({visible:!1})},a.state={warningData:[],WarningBtnShow:!1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.warningData,a=e.WarningBtnShow;return o.a.createElement("span",null,a&&o.a.createElement(M.a,{className:"WarningBtn",type:"danger",ghost:!0,onClick:this.showDrawer},"\u8b66\u544a"),o.a.createElement(T.a,{title:"\u8b66\u544a",placement:"right",closable:!1,onClose:this.onClose,visible:this.state.visible},o.a.createElement(q,{level:4},H()(this.props.date).format("YYYY-MM-DD")),o.a.createElement(q,{level:4},"\u5eab\u5b58\u4e0d\u8db3"),t.map(function(e){return o.a.createElement(G,{type:"danger"},e.title,o.a.createElement("br",null))}),o.a.createElement(q,{level:4})))}},{key:"componentWillMount",value:function(){var e=this;console.log("warning page"),y.a.get(D+"/ShopData/getWarning",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),date:this.props.date,page:this.props.page}}).then(function(t){"OK"===t.data?(e.setState({WarningBtnShow:!1}),console.log("1")):(e.setState({WarningBtnShow:!0,warningData:t.data}),console.log("2"))}).catch(function(e){console.log(e)})}},{key:"componentWillUpdate",value:function(){}}]),t}(o.a.Component),$=(a(616),"2019-06-12"),Q=[{title:"\u54c1\u9805",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u9032\u8ca8\u91cf",dataIndex:"order",key:"order",width:"2cm"},{title:"\u5831\u5ee2",dataIndex:"scrap",key:"scrap",width:"2cm"},{title:"\u5eab\u5b58",dataIndex:"stock",key:"stock",width:"2cm"}],X=[{title:"\u9805\u76ee",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u91d1\u984d",dataIndex:"cost",key:"cost",width:"2cm"}],Z=[{title:"",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u91d1\u984d",dataIndex:"income",key:"income",width:"2cm"}],ee=[],te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).GetData=function(e,t,n){y.a.get(D+"/ShopData/getStock",{params:{shop:e,branch:t,date:n}}).then(function(e){a.setState({data:e.data})}).catch(function(e){a.setState({data:""}),console.log(e)}),y.a.get(D+"/ShopData/getExpense",{params:{shop:e,branch:t,date:n}}).then(function(e){a.setState({expense:e.data})}).catch(function(e){a.setState({expense:""}),console.log(e)}),y.a.get(D+"/ShopData/getIncome",{params:{shop:e,branch:t,date:n}}).then(function(e){a.setState({income:e.data})}).catch(function(e){a.setState({income:""}),console.log(e)})},a.state={data:ee,expense:ee,income:ee,lastUploadDate:$,stockTableData:"",date:""},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.expense;return o.a.createElement("span",{className:"Info"},o.a.createElement(A.a,{defaultValue:H()(this.state.date,"YYYY-MM-DD"),format:"YYYY-MM-DD",onChange:this.DatePickerFunction.bind(this)}),o.a.createElement(J,{page:"Info",date:window.localStorage.getItem("InfoPageDate")}),o.a.createElement("h2",null),o.a.createElement("h3",{style:{marginBottom:16}},"\u5eab\u5b58"),o.a.createElement(N.a,{columns:Q,dataSource:t,size:"small",pagination:!1,scroll:{y:240}}),o.a.createElement("h3",{style:{marginBottom:16}},"\u652f\u51fa"),o.a.createElement(N.a,{columns:X,dataSource:a,size:"small",pagination:!1,scroll:{y:240}}),o.a.createElement("h3",{style:{marginBottom:16}},"\u6536\u5165"),o.a.createElement(N.a,{columns:Z,dataSource:this.state.income,size:"small",pagination:!1,scroll:{y:240}}))}},{key:"DatePickerFunction",value:function(e,t){console.log(t),window.localStorage.setItem("InfoPageDate",t),this.GetData(window.localStorage.getItem("shopname"),this.props.Branch,t)}},{key:"componentWillUpdate",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"componentWillMount",value:function(){null===window.localStorage.getItem("InfoPageDate")?(this.GetData(window.localStorage.getItem("shopname"),this.props.Branch,H()().format("YYYY-MM-DD")),this.setState({date:H()().format("YYYY-MM-DD")})):(this.GetData(window.localStorage.getItem("shopname"),this.props.Branch,window.localStorage.getItem("InfoPageDate")),this.setState({date:window.localStorage.getItem("InfoPageDate")}))}}]),t}(o.a.Component),ae=a(629),ne=a(630),oe=(a(617),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).ShopChangeHandle=function(e){console.log("dropdown change to "+e.key),a.setState({Branch:a.state.BranchList[e.key-1].branch}),window.localStorage.setItem("branch",a.state.BranchList[e.key-1].branch),a.props.shopchange()},a.state={Branch:window.localStorage.getItem("branch"),BranchList:[]},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.BranchList;return o.a.createElement(B.a,{className:"Dropdown",overlay:o.a.createElement(U.b,{onClick:this.ShopChangeHandle},e.map(function(e){return o.a.createElement(U.b.Item,{key:e.key,selectable:!0},e.branch)})),trigger:["click"]},o.a.createElement("span",{className:"ant-dropdown-link",style:{color:"#1E90FF"}},this.state.Branch," ",o.a.createElement(Y.a,{type:"down"})))}},{key:"componentWillMount",value:function(){var e=this;y.a.get(D+"/ShopInfo/getBranch",{params:{shopname:window.localStorage.getItem("shopname")}}).then(function(t){e.setState({BranchList:t.data})}).catch(function(e){console.log(e)})}}]),t}(o.a.Component)),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).shopchange=function(){a.props.shopchange()},a.state={Permission:"",isAuth:a.props.isAuth,withDropdown:a.props.dropdown},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"LogoutFunction",value:function(){this.props.logout()}}]),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(ae.a,{content:o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("p",null,"\u59d3\u540d\uff1a",this.props.name),o.a.createElement("p",null,"\u4f4d\u7f6e\uff1a",!1===this.state.withDropdown&&this.props.branch,!0===this.state.withDropdown&&window.sessionStorage.getItem("permission")>=7&&o.a.createElement(oe,{render:!1,shopchange:this.shopchange}),!0===this.state.withDropdown&&window.sessionStorage.getItem("permission")<7&&this.props.branch),o.a.createElement("p",null,"\u6b0a\u9650\uff1a",this.state.Permission)),o.a.createElement(M.a,{className:"logout",onClick:function(){return e.LogoutFunction()}},"\u767b\u51fa",o.a.createElement(Y.a,{type:"logout"}))),trigger:"click"},o.a.createElement(ne.a,{className:"Avatar",shape:this.props.shape,icon:"user",size:this.props.size}))}},{key:"componentWillMount",value:function(){console.log("InfoIcon"),"9"===this.props.permission?this.setState({Permission:"\u958b\u767c\u8005",Display:!0}):"7"===this.props.permission?this.setState({Permission:"\u8001\u95c6",Display:!0}):"5"===this.props.permission?this.setState({Permission:"\u5e97\u9577"}):this.setState({Permission:"\u4eba\u54e1"})}}]),t}(o.a.Component),se=a(114),ce=(a(618),se.a.Option),re=A.a.RangePicker,ie=[{key:1,title:"item1"}],me=function(e){function t(){return Object(i.a)(this,t),Object(d.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.x,a=e.y,n=e.stroke,l=e.value;return o.a.createElement("text",{x:t,y:a,dy:-4,fill:n,fontSize:10,textAnchor:"middle"},l)}}]),t}(o.a.Component),de=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).ItemSelect=function(e,t){console.log(e),console.log(t),1===t?a.setState({selecter1:e}):2===t?a.setState({selecter2:e}):3===t?a.setState({selecter3:e}):4===t&&a.setState({selecter4:e})},a.handleChange=function(e,t,n){console.log("Various parameters",e,t,n),a.setState({filteredInfo:t,sortedInfo:n}),console.log(n),console.log(a.state.sortedInfo)},a.updateDimensions=function(e){console.log("StockList updateDimensions");var t=a.refDom,n=t.clientWidth,o=t.clientHeight;console.log("===================================="),console.log(n,o,a.refDom),console.log("===================================="),a.setState({chartWidth:n})},a.state={stock:[],sold:[],scrap:[],order:[],itemList:ie,startDate:H()().add("day",-7).format("YYYY-MM-DD"),endDate:H()().format("YYYY-MM-DD"),chartWidth:a.props.Width,chartHeight:250,selecter1:"",selecter2:"",selecter3:"",selecter4:""},a.saveRef=function(e){a.refDom=e},a.updateDimensions=a.updateDimensions.bind(Object(W.a)(a)),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"StockList",ref:this.saveRef},o.a.createElement(re,{defaultValue:[H()(this.state.startDate,"YYYY-MM-DD"),H()(this.state.endDate,"YYYY-MM-DD")],format:"YYYY-MM-DD",onChange:this.DatePickerFunction.bind(this)}),o.a.createElement(se.a,{defaultValue:"-",style:{width:180},onChange:function(t){return e.ItemSelect(t,1)}},this.state.itemList.map(function(e){return o.a.createElement(ce,{key:e.key,value:e.title},e.title)})),o.a.createElement(se.a,{defaultValue:"-",style:{width:180},onChange:function(t){return e.ItemSelect(t,2)}},this.state.itemList.map(function(e){return o.a.createElement(ce,{key:e.key,value:e.title},e.title)})),o.a.createElement(se.a,{defaultValue:"-",style:{width:180},onChange:function(t){return e.ItemSelect(t,3)}},this.state.itemList.map(function(e){return o.a.createElement(ce,{key:e.key,value:e.title},e.title)})),o.a.createElement(se.a,{defaultValue:"-",style:{width:180},onChange:function(t){return e.ItemSelect(t,4)}},this.state.itemList.map(function(e){return o.a.createElement(ce,{key:e.key,value:e.title},e.title)})),o.a.createElement(J,{page:"StockList"}),o.a.createElement("h3",null,"\u92b7\u552e\u91cf"),o.a.createElement(L.f,{width:this.state.chartWidth,height:this.state.chartHeight,data:this.state.sold,margin:{top:20,right:30,left:20,bottom:10}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"Date"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter1,stroke:"#ff0000",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter2,stroke:"#00ff00",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter3,stroke:"#0000FF",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter4,troke:"#0066FF",label:o.a.createElement(me,null)})),o.a.createElement("h3",null,"\u5eab\u5b58"),o.a.createElement(L.f,{width:this.state.chartWidth,height:this.state.chartHeight,data:this.state.stock,margin:{top:20,right:30,left:20,bottom:10}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"Date"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter1,stroke:"#ff0000",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter2,stroke:"#00ff00",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter3,stroke:"#0000FF",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter4,troke:"#0066FF",label:o.a.createElement(me,null)})),o.a.createElement("h3",null,"\u5831\u5ee2"),o.a.createElement(L.f,{width:this.state.chartWidth,height:this.state.chartHeight,data:this.state.scrap,margin:{top:20,right:30,left:20,bottom:10}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"Date"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter1,stroke:"#ff0000",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter2,stroke:"#00ff00",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter3,stroke:"#0000FF",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter4,troke:"#0066FF",label:o.a.createElement(me,null)})),o.a.createElement("h3",null,"\u9032\u8ca8"),o.a.createElement(L.f,{width:this.state.chartWidth,height:this.state.chartHeight,data:this.state.order,margin:{top:20,right:30,left:20,bottom:10}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"Date"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter1,stroke:"#ff0000",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter2,stroke:"#00ff00",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter3,stroke:"#0000FF",label:o.a.createElement(me,null)}),o.a.createElement(L.e,{type:"monotone",dataKey:this.state.selecter4,troke:"#0066FF",label:o.a.createElement(me,null)})))}},{key:"DatePickerFunction",value:function(e,t){var a=this;window.localStorage.setItem("StockListPageDate_Start",t[0]),window.localStorage.setItem("StockListPageDate_End",t[1]),y.a.get(D+"/ShopData/getRangeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:t[0],end:t[1]}}).then(function(e){console.log(e.data),a.setState({stock:e.data[0]}),a.setState({scrap:e.data[1]}),a.setState({sold:e.data[2]}),a.setState({order:e.data[3]}),console.log(a.state.stock)}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions);var t=window.localStorage.getItem("StockListPageDate_Start"),a=window.localStorage.getItem("StockListPageDate_End");y.a.get(D+"/ShopData/getStockItem",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){e.setState({itemList:t.data})}).catch(function(e){console.log(e)}),console.log(t+"\u548c"+a),null===t||null===a?y.a.get(D+"/ShopData/getRangeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:H()().add("day",-6).format("YYYY-MM-DD"),end:H()().format("YYYY-MM-DD")}}).then(function(t){e.setState({stock:t.data[0],scrap:t.data[1],sold:t.data[2],order:t.data[3]})}).catch(function(e){console.log(e)}):(y.a.get(D+"/ShopData/getRangeData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),start:t,end:a}}).then(function(t){e.setState({stock:t.data[0],scrap:t.data[1],sold:t.data[2],order:t.data[3]})}).catch(function(e){console.log(e)}),this.setState({startDate:t,endDate:a})),console.log("componentWillMount")}},{key:"componentWillUnmount",value:function(){console.log("componentWillUnmount"),window.removeEventListener("resize",this.updateDimensions)}},{key:"componentWillUpdate",value:function(){console.log("componentWillUpdate")}}]),t}(o.a.Component),he=(a(619),A.a.MonthPicker),ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).handleChange=function(e,t,n){a.setState({filteredInfo:t,sortedInfo:n})},a.updateDimensions=function(e){console.log("AreaChart updateDimensions");var t=a.refDom,n=t.clientWidth,o=t.clientHeight;console.log("===================================="),console.log(n,o,a.refDom),console.log("===================================="),a.setState({chartWidth:n})},a.DataUpdate=function(e,t){y.a.get(D+"/ShopData/getAchieving",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),month:t,lastmonth:e}}).then(function(e){a.setState({data:e.data}),console.log(a.state.data)}).catch(function(e){console.log(e)}),a.setState({month:t})},a.state={data:[],month:H()().format("YYY-MM"),chartWidth:a.props.Width,chartHeight:500},a.saveRef=function(e){a.refDom=e},a.updateDimensions=a.updateDimensions.bind(Object(W.a)(a)),a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.sortedInfo,t=[{title:"\u54c1\u9805",dataIndex:"title",key:"title",width:"10%"},{title:"\u4e0a\u6708\u5eab\u5b58",dataIndex:"\u4e0a\u6708\u5eab\u5b58",key:"\u4e0a\u6708\u5eab\u5b58",width:"23%",defaultSortOrder:"descend",sorter:function(e,t){return e.\u4e0a\u6708\u5eab\u5b58-t.\u4e0a\u6708\u5eab\u5b58},sortOrder:"\u4e0a\u6708\u5eab\u5b58"===(e=e||{}).columnKey&&e.order},{title:"\u7e3d\u9032\u8ca8",dataIndex:"\u7e3d\u9032\u8ca8",key:"\u7e3d\u9032\u8ca8",width:"22%",defaultSortOrder:"descend",sorter:function(e,t){return e.\u7e3d\u9032\u8ca8-t.\u7e3d\u9032\u8ca8},sortOrder:"\u7e3d\u9032\u8ca8"===e.columnKey&&e.order},{title:"\u7e3d\u92b7\u552e",dataIndex:"\u7e3d\u92b7\u552e",key:"\u7e3d\u92b7\u552e",width:"22%",sorter:function(e,t){return e.\u7e3d\u92b7\u552e-t.\u7e3d\u92b7\u552e},sortOrder:"\u7e3d\u92b7\u552e"===e.columnKey&&e.order},{title:"\u5831\u5ee2",dataIndex:"\u5831\u5ee2",key:"\u5831\u5ee2",width:"22%",sorter:function(e,t){return e.\u5831\u5ee2-t.\u5831\u5ee2},sortOrder:"\u5831\u5ee2"===e.columnKey&&e.order}],a=this.state,n=a.chartWidth,l=a.data;return o.a.createElement("div",{ref:this.saveRef},o.a.createElement(he,{defaultValue:H()(this.state.month,"YYYY-MM"),format:"YYYY-MM",onChange:this.MonthPickerFunction.bind(this)}),o.a.createElement(L.b,{width:n,height:500,data:l,margin:{top:20,right:30,left:20,bottom:5}},o.a.createElement(L.c,{strokeDasharray:"3 3"}),o.a.createElement(L.h,{dataKey:"title"}),o.a.createElement(L.i,null),o.a.createElement(L.g,null),o.a.createElement(L.d,null),o.a.createElement(L.a,{dataKey:"\u7e3d\u92b7\u552e",stackId:"a",fill:"#8884d8"}),o.a.createElement(L.a,{dataKey:"\u5831\u5ee2",stackId:"a",fill:"#ff0000"}),o.a.createElement(L.a,{dataKey:"\u7e3d\u9032\u8ca8",stackId:"b",fill:"#82ca9d"}),o.a.createElement(L.a,{dataKey:"\u4e0a\u6708\u5eab\u5b58",stackId:"b",fill:"#1E90FF"})),o.a.createElement(N.a,{columns:t,dataSource:this.state.data,size:"small",pagination:!1,scroll:{y:240},onChange:this.handleChange}))}},{key:"componentWillMount",value:function(){window.addEventListener("resize",this.updateDimensions);var e,t=window.localStorage.getItem("AchievingPageDate_Month");null===t&&(t=H()().format("YYYY-MM")),e=H()(t).add("month",-1).format("YYYY-MM"),this.DataUpdate(e,t)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"componentWillUpdate",value:function(){}},{key:"MonthPickerFunction",value:function(e,t){var a;window.localStorage.setItem("AchievingPageDate_Month",t),a=H()(t).add("month",-1).format("YYYY-MM"),this.DataUpdate(a,t)}}]),t}(o.a.Component),pe=(a(620),A.a.MonthPicker),ge=[{title:"\u54c1\u9805",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u6578\u91cf",dataIndex:"order",key:"order",width:"2cm"}],fe=[{title:"\u54c1\u9805",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u6578\u91cf",dataIndex:"scrap",key:"scrap",width:"2cm"}],Se=[{title:"\u9805\u76ee",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u91d1\u984d",dataIndex:"cost",key:"cost",width:"2cm"}],we=[{title:"",dataIndex:"title",key:"title",render:function(e){return o.a.createElement("span",{style:{color:"#1E90FF"}},e)}},{title:"\u91d1\u984d",dataIndex:"income",key:"income",width:"2cm"}],Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={total_income:[],total_expense:[],total_order:[],total_scrap:[],month:H()().format("YYYY-MM")},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(pe,{defaultValue:H()(this.state.month,"YYYY-MM"),format:"YYYY-MM",onChange:this.MonthPickerFunction.bind(this)}),o.a.createElement("h3",{style:{marginBottom:16}},"\u7e3d\u71df\u6536"),o.a.createElement(N.a,{columns:we,dataSource:this.state.total_income,size:"small",pagination:!1,scroll:{y:240}}),o.a.createElement("h3",{style:{marginBottom:16}},"\u7e3d\u652f\u51fa"),o.a.createElement(N.a,{columns:Se,dataSource:this.state.total_expense,size:"small",pagination:!1,scroll:{y:240}}),o.a.createElement("h3",{style:{marginBottom:16}},"\u7e3d\u9032\u8ca8"),o.a.createElement(N.a,{columns:ge,dataSource:this.state.total_order,size:"small",pagination:!1,scroll:{y:240}}),o.a.createElement("h3",{style:{marginBottom:16}},"\u7e3d\u5831\u5ee2"),o.a.createElement(N.a,{columns:fe,dataSource:this.state.total_scrap,size:"small",pagination:!1,scroll:{y:240}}))}},{key:"MonthPickerFunction",value:function(e,t){var a=this;window.localStorage.setItem("StatisticsPageDate_Month",t),y.a.get(D+"/ShopData/getStatistics",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),month:t}}).then(function(e){a.setState({data:e.data}),a.setState({total_income:e.data[0],total_expense:e.data[1],total_order:e.data[2],total_scrap:e.data[3]}),console.log(a.state.data)}).catch(function(e){console.log(e)}),this.setState({month:t})}},{key:"componentWillMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions);var t=window.localStorage.getItem("StatisticsPageDate_Month");null===t&&(t=H()().format("YYYY-MM")),y.a.get(D+"/ShopData/getStatistics",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),month:t}}).then(function(t){e.setState({data:t.data}),e.setState({total_income:t.data[0],total_expense:t.data[1],total_order:t.data[2],total_scrap:t.data[3]}),console.log(e.state.data)}).catch(function(e){console.log(e)}),this.setState({month:t})}}]),t}(o.a.Component),ye=p.a.Header,be=p.a.Footer,ke=p.a.Sider,De=p.a.Content,Ie=[{key:1,shopname:"xxx"}],ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).ShopChangeHandle=function(e){console.log("dropdown change to "+e.key),a.setState({Branch:a.state.BranchList[e.key-1].branch}),window.localStorage.setItem("branch",a.state.BranchList[e.key-1].branch)},a.state={Branch:window.localStorage.getItem("branch"),BranchList:Ie,StockPage:!1,ScrapPage:!1,isAuth:"",Display:"",visible:!1,warningData:[]},a.saveRef=function(e){a.refDom=e},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"StockFunction",value:function(e){this.setState({StockPage:!0})}},{key:"ScrapFunction",value:function(e){this.setState({ScrapPage:!0})}},{key:"LogoutFunction",value:function(){window.sessionStorage.setItem("isAuth","false"),this.setState({isAuth:"false"})}},{key:"render",value:function(){var e=this,t=[{path:"/Main",exact:!0,main:function(){return o.a.createElement(te,{Branch:e.state.Branch,Width:1500})}},{path:"/StockList",exact:!0,main:function(){return o.a.createElement(de,{Branch:e.state.Branch,Width:e.refDom.clientWidth})}},{path:"/BalanceSheet",exact:!0,main:function(){return o.a.createElement(V,{Branch:e.state.Branch,Width:e.refDom.clientWidth})}},{path:"/Statistics",exact:!0,main:function(){return o.a.createElement(Ee,{Branch:e.state.Branch,Width:e.refDom.clientWidth})}},{path:"/Achieving",exact:!0,main:function(){return o.a.createElement(ue,{Branch:e.state.Branch,Width:e.refDom.clientWidth})}}],a=this.state,n=a.StockPage,l=a.ScrapPage,s=a.BranchList;return"false"===window.sessionStorage.getItem("isAuth")?o.a.createElement(r.a,{to:"/"}):!0===n?o.a.createElement(r.a,{to:"User"}):!0===l?o.a.createElement(r.a,{to:"Scrap"}):(console.log("Main"),o.a.createElement("div",{className:"MainPage"},o.a.createElement(p.a,null,o.a.createElement(ye,{className:"Header"},o.a.createElement("img",{className:"CSILOGO",src:w.a,alt:"CSILOGO"}),o.a.createElement(le,{name:window.localStorage.getItem("name"),branch:window.localStorage.getItem("branch"),permission:window.sessionStorage.getItem("permission"),shape:"square",dropdown:!1,logout:function(){return e.LogoutFunction()}}),o.a.createElement(B.a,{className:"Dropdown",overlay:o.a.createElement(U.b,{onClick:this.ShopChangeHandle},s.map(function(e){return o.a.createElement(U.b.Item,{key:e.key,selectable:!0},e.branch)})),trigger:["click"]},o.a.createElement("span",{className:"ant-dropdown-link",style:{color:"#1E90FF"}},this.state.Branch," ",o.a.createElement(Y.a,{type:"down"})))),o.a.createElement(p.a,null,o.a.createElement(c.a,null,o.a.createElement(ke,{theme:"light",className:"Sider",breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){console.log(e)},onCollapse:function(e,t){console.log(e,t)}},o.a.createElement("div",{className:"SiderItem"},o.a.createElement(U.b,{style:{background:"#ccedfc",padding:0},theme:"light",mode:"inline",defaultSelectedKeys:["1"]},o.a.createElement(U.b.Item,{key:"1"},o.a.createElement(Y.a,{type:"shop"}),o.a.createElement("span",{className:"nav-text"},"\u5e97\u5bb6\u8cc7\u8a0a"),o.a.createElement(c.b,{to:"/Main"})),o.a.createElement(U.b.Item,{key:"2"},o.a.createElement(Y.a,{type:"stock"}),o.a.createElement("span",{className:"nav-text"},"\u5eab\u5b58\u660e\u7d30"),o.a.createElement(c.b,{to:"/StockList"})),o.a.createElement(U.b.Item,{key:"3"},o.a.createElement(Y.a,{type:"money-collect"}),o.a.createElement("span",{className:"nav-text"},"\u6536\u652f\u5716"),o.a.createElement(c.b,{to:"/BalanceSheet"})),o.a.createElement(U.b.Item,{key:"4"},o.a.createElement(Y.a,{type:"bar-chart"}),o.a.createElement("span",{className:"nav-text"},"\u9054\u6210\u7387"),o.a.createElement(c.b,{to:"/Achieving"})),o.a.createElement(U.b.Item,{key:"5"},o.a.createElement(Y.a,{type:"profile"}),o.a.createElement("span",{className:"nav-text"},"\u7d71\u8a08"),o.a.createElement(c.b,{to:"/Statistics"})),o.a.createElement(U.b.Item,{key:"6",onClick:this.StockFunction.bind(this)},o.a.createElement(Y.a,{type:"unordered-list"}),o.a.createElement("span",{className:"nav-text"},"\u76e4\u9ede")),o.a.createElement(U.b.Item,{key:"7",onClick:this.ScrapFunction.bind(this)},o.a.createElement(Y.a,{type:"delete"}),o.a.createElement("span",{className:"nav-text"},"\u5831\u5ee2"))))),o.a.createElement(De,{className:"Content"},o.a.createElement("div",{style:{display:"flex",width:"100%",height:"100%"}},o.a.createElement("div",{ref:this.saveRef,style:{flex:1,padding:"10px",width:"0%"}},t.map(function(e,t){return o.a.createElement(r.b,{key:t,path:e.path,exact:e.exact,component:e.main})})))))),o.a.createElement(be,{className:"Footer"}))))}},{key:"componentWillMount",value:function(){var e=this;console.log("componentWillMount"),console.log(window.localStorage.getItem("shopname")),y.a.get(D+"/ShopInfo/getBranch",{params:{shopname:window.localStorage.getItem("shopname")}}).then(function(t){e.setState({BranchList:t.data})}).catch(function(e){console.log(e)}),"9"===window.sessionStorage.getItem("permission")?this.setState({Position:"\u958b\u767c\u8005",Display:!0}):"7"===window.sessionStorage.getItem("permission")&&this.setState({Position:"\u8001\u95c6",Display:!1})}}]),t}(o.a.Component),Ye=(a(621),a(638)),Me=a(640),Oe=a(637),xe=(a(622),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(d.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(o)))).onChange=function(e){var t=e.target.value;(!Number.isNaN(t)&&/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/.test(t)||""===t||"-"===t)&&a.props.onChange(t)},a.onBlur=function(){var e=a.props.onBlur;e&&e()},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return o.a.createElement(v.a,Object.assign({},this.props,{onChange:this.onChange,onBlur:this.onBlur,placeholder:"",maxLength:25}))}}]),t}(o.a.Component)),je=p.a.Header,Fe=p.a.Content,Pe=function(e){Ye.a[e]({message:"\u4e0a\u50b3\u6210\u529f"})},Ce=["\u71df\u696d\u984d"],Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).StockValueStore=function(e,t){var n=a.state.data;console.log("===",t),n.forEach(function(a){a.key===e.key&&(a.stock=t)}),a.setState({data:n})},a.OrderValueStore=function(e,t){var n=a.state.data;console.log("order:",t),n.forEach(function(a){a.key===e.key&&(a.order=t)}),a.setState({data:n})},a.ExpenseValueStore=function(e,t){var n=a.state.expense;console.log("expense:",t),n.forEach(function(a){a.key===e.key&&(a.cost=t)}),a.setState({expense:n})},a.IncomStore=function(e){a.setState({Income:e})},a.DataUpdata=function(e){a.setState({Update:!0})},a.state={isAuth:"",UploadDisable:!0,data:"",expense:"",Income:"",Shop:"",Name:"",Branch:"",Permission:"",Position:"",Display:!1,MainPage:!1,ScrapPage:!1,Update:!1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"MainFnction",value:function(e){this.setState({MainPage:!0})}},{key:"ScrapFunction",value:function(e){this.setState({ScrapPage:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.expense,l=t.isAuth,s=t.MainPage,c=t.ScrapPage;return"false"===l?(console.log("logout"),o.a.createElement(r.a,{to:"/"})):!0===s?o.a.createElement(r.a,{to:"Main"}):!0===c?o.a.createElement(r.a,{to:"Scrap"}):o.a.createElement("div",{className:"App"},o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(f.a,{span:24},o.a.createElement(je,{className:"Header"},o.a.createElement("div",null,this.state.Display&&o.a.createElement(Y.a,{type:"delete",theme:"filled",className:"delete",style:{fontSize:"1cm",color:"#ff0011"},onClick:this.ScrapFunction.bind(this)}),o.a.createElement(le,{name:window.localStorage.getItem("name"),branch:window.localStorage.getItem("branch"),permission:window.sessionStorage.getItem("permission"),shape:"circle",size:60,dropdown:!0,shopchange:this.DataUpdata,logout:function(){return e.LogoutFunction()}}),this.state.Display&&o.a.createElement(Y.a,{type:"bar-chart",className:"analyze",style:{fontSize:"1cm",color:"#08c"},onClick:this.MainFnction.bind(this)})))),o.a.createElement(f.a,{span:24},o.a.createElement(Fe,null,o.a.createElement("div",{className:"Content"},o.a.createElement("div",{className:"ListName"},o.a.createElement(Me.a,{bordered:!0,dataSource:a,renderItem:function(t){return o.a.createElement(Me.a.Item,{key:t.key,actions:[o.a.createElement(Oe.a,{key:t.key,className:"Number",value:t.stock,onChange:function(a){return e.StockValueStore(t,a)},defaultValue:"0"}),o.a.createElement(Oe.a,{key:t.key,className:"Order",value:t.order,placeholder:"\u53eb\u8ca8",onChange:function(a){return e.OrderValueStore(t,a)},decimalSeparator:"."})]},t.title)}}),o.a.createElement(Me.a,{bordered:!0,dataSource:n,renderItem:function(t){return o.a.createElement(Me.a.Item,{key:t.key,actions:[o.a.createElement(xe,{style:{width:130},key:t.key,addonBefore:"NTD:",value:t.cost,onChange:function(a){return e.ExpenseValueStore(t,a)},defaultValue:"0"})]},t.title)}}),o.a.createElement(Me.a,{bordered:!0,dataSource:Ce,renderItem:function(t){return o.a.createElement(Me.a.Item,{actions:[o.a.createElement(xe,{style:{width:130},addonBefore:"NTD:",value:e.state.Income,onChange:function(t){return e.IncomStore(t)}})]},"\u71df\u696d\u984d")}})),o.a.createElement(M.a,{type:"primary",className:"Upload",disabled:this.state.UploadDisable,onClick:this.UploadFunction.bind(this)},"\u4e0a\u50b3")))))))}},{key:"LogoutFunction",value:function(){this.setState({isAuth:"false"}),window.sessionStorage.setItem("isAuth","false")}},{key:"UploadFunction",value:function(e){var t=this;y.a.get(D+"/ShopData/getTodayData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),today:H()().format("YYYY-MM-DD")}}).then(function(e){console.log(e.data),0===e.data.length?y.a.post(D+"/ShopData/add",{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),name:window.localStorage.getItem("name"),date:H()().format("YYYY-MM-DD"),time:H()().format("hh:mm"),stock:t.state.data,expense:t.state.expense,income:t.state.Income}).then(function(e){console.log(e),window.sessionStorage.getItem("permission")<7&&(t.setState({UploadDisable:!0}),y.a.put(D+"/User/updateUploaddate/"+window.sessionStorage.getItem("auto_increment"),{date:H()().format("YYYY-MM-DD")}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})),console.log("success"),window.sessionStorage.setItem("lastupload",H()().format("YYYY-MM-DD")),Pe("success")}).catch(function(e){console.log(e)}):y.a.put(D+"/ShopData/UpdateStock/"+e.data[0],{name:window.localStorage.getItem("name"),time:H()().format("hh:mm"),stock:t.state.data,expense:t.state.expense,income:t.state.Income,type:"stock"}).then(function(e){console.log(e),Pe("success")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(){var e=this;console.log("componentWillMount"),null===window.sessionStorage.getItem("isAuth")&&this.setState({isAuth:"false"}),y.a.get(D+"/ShopData/getLastStock",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){for(var a in t.data)t.data[a].order=0,t.data[a].scrap=0;e.setState({data:t.data,Branch:window.localStorage.getItem("branch"),isAuth:window.sessionStorage.getItem("isAuth"),Permission:window.sessionStorage.getItem("permission")})}).catch(function(e){console.log(e)}),y.a.get(D+"/ShopData/getLastExpense",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){for(var a in t.data)t.data[a].cost=0;e.setState({expense:t.data})}).catch(function(e){console.log(e)}),"9"===window.sessionStorage.getItem("permission")?this.setState({Position:"\u958b\u767c\u8005",Display:!0}):"7"===window.sessionStorage.getItem("permission")?this.setState({Position:"\u8001\u95c6",Display:!0}):"5"===window.sessionStorage.getItem("permission")?this.setState({Position:"\u5e97\u9577"}):this.setState({Position:"\u4eba\u54e1"}),console.log(window.sessionStorage.getItem("isAuth")),window.sessionStorage.getItem("lastupload")!==H()().format("YYYY-MM-DD")&&("16"!==H()().format("HH")&&"17"!==H()().format("HH")&&"18"!==H()().format("HH")&&"19"!==H()().format("HH")&&"20"!==H()().format("HH")&&"21"!==H()().format("HH")||this.setState({UploadDisable:!1})),this.setState({UploadDisable:!1})}},{key:"componentDidMount",value:function(){console.log("componentdDidMount"),console.log(H()().format("YYYY-MM-DD hh:mm"))}},{key:"componentDidUpdate",value:function(){var e=this;console.log("componentDidUpdate"),!0===this.state.Update&&(y.a.get(D+"/ShopData/getLastStock",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){if(t.data!==[]){for(var a in t.data)t.data[a].order=0,t.data[a].scrap=0;e.setState({data:t.data,Branch:window.localStorage.getItem("branch"),UploadDisable:!1})}else console.log("test 1"),e.setState({data:"",Branch:window.localStorage.getItem("branch")})}).catch(function(t){console.log(t),console.log("test 2"),e.setState({data:"",Branch:window.localStorage.getItem("branch"),UploadDisable:!0})}),y.a.get(D+"/ShopData/getLastExpense",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){if(t.data!==[]){for(var a in t.data)t.data[a].cost=0;e.setState({expense:t.data})}else console.log("test 3"),e.setState({expense:"",UploadDisable:!0})}).catch(function(t){console.log(t),console.log("test 4"),e.setState({expense:"",UploadDisable:!0})}),this.setState({Update:!1}))}}]),t}(o.a.Component),Ue=(a(623),a(631)),We=p.a.Header,Ne=p.a.Content,Le=function(e){Ye.a[e]({message:"\u4e0a\u50b3\u6210\u529f"})},Ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).ScrapValueStore=function(e,t){var n=a.state.data;n.forEach(function(a){a.key===e.key&&(a.scrap=t)}),a.setState({data:n})},a.DataUpdata=function(e){a.setState({Update:!0})},a.Getdata=function(){},a.state={isAuth:"",UploadDisable:!0,data:"",expense:"",Income:"",Shop:"",Name:"",Branch:"",Permission:"",Position:"",Display:!1,MainPage:!1,UserPage:!1,Update:!1},a}return Object(u.a)(t,e),Object(m.a)(t,[{key:"LogoutFunction",value:function(){this.setState({isAuth:"false"}),window.sessionStorage.setItem("isAuth","false")}},{key:"MainFnction",value:function(e){this.setState({MainPage:!0})}},{key:"UserFunction",value:function(e){this.setState({UserPage:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.isAuth,l=t.MainPage,s=t.UserPage;return"false"===n?(console.log("logout"),o.a.createElement(r.a,{to:"/"})):!0===l?o.a.createElement(r.a,{to:"Main"}):!0===s?o.a.createElement(r.a,{to:"User"}):o.a.createElement("div",{className:"App"},o.a.createElement(g.a,null,o.a.createElement(p.a,null,o.a.createElement(f.a,{span:24},o.a.createElement(We,{className:"Header"},o.a.createElement("div",null,o.a.createElement(Y.a,{type:"bars",className:"store",style:{fontSize:"1cm",color:"#08c"},onClick:this.UserFunction.bind(this)}),o.a.createElement(le,{name:window.localStorage.getItem("name"),branch:window.localStorage.getItem("branch"),permission:window.sessionStorage.getItem("permission"),shape:"circle",size:60,dropdown:!0,shopchange:this.DataUpdata,logout:function(){return e.LogoutFunction()}}),o.a.createElement(Y.a,{type:"bar-chart",className:"analyze",style:{fontSize:"1cm",color:"#08c"},onClick:this.MainFnction.bind(this)})))),o.a.createElement(f.a,{span:24},o.a.createElement(Ne,null,o.a.createElement("div",{className:"Content"},o.a.createElement("div",{className:"ListName"},o.a.createElement(Me.a,{bordered:!0,dataSource:a,renderItem:function(t){return o.a.createElement(Me.a.Item,{key:t.key,actions:[o.a.createElement(Oe.a,{key:t.key,className:"Scrap",value:t.scrap,placeholder:"\u53eb\u8ca8",onChange:function(a){return e.ScrapValueStore(t,a)},decimalSeparator:"."})]},t.title)}})),o.a.createElement("div",{className:"deleteSw"},o.a.createElement(Ue.a,{checked:this.state.deleteSw,onChange:this.deleteSwFunc.bind(this)})),o.a.createElement("div",{className:"deleteBtn"},o.a.createElement(M.a,{disabled:this.state.UploadDisable,type:"danger",className:"Upload",onClick:this.UploadFunction.bind(this)},o.a.createElement(Y.a,{type:"delete",style:{fontSize:"0.7cm"}})))))))))}},{key:"deleteSwFunc",value:function(e){console.log(e),!0===e?this.setState({UploadDisable:!1,deleteSw:!0}):!1===e&&this.setState({UploadDisable:!0,deleteSw:!1})}},{key:"UploadFunction",value:function(e){var t=this;console.log(this.state.Shop),this.setState({UploadDisable:!0,deleteSw:!1}),y.a.get(D+"/ShopData/getTodayData",{params:{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),today:H()().format("YYYY-MM-DD")}}).then(function(e){console.log(e.data),0===e.data.length?y.a.post(D+"/ShopData/add",{shopname:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch"),name:window.localStorage.getItem("name"),date:H()().format("YYYY-MM-DD"),time:H()().format("hh:mm"),stock:t.state.data,expense:t.state.expense,income:t.state.Income}).then(function(e){console.log(e),Le("success")}).catch(function(e){console.log(e)}):y.a.put(D+"/ShopData/UpdateStock/"+e.data[0],{name:window.localStorage.getItem("name"),time:H()().format("hh:mm"),stock:t.state.data,type:"scrap"}).then(function(e){console.log(e),Le("success")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(){var e=this;console.log("componentWillMount"),y.a.get(D+"/ShopData/getLastStock",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){for(var a in t.data)t.data[a].order=0,t.data[a].scrap=0;e.setState({data:t.data,Branch:window.localStorage.getItem("branch")})}).catch(function(e){console.log(e)}),y.a.get(D+"/ShopData/getLastExpense",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){for(var a in t.data)t.data[a].cost=0;e.setState({expense:t.data})}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){console.log("componentdDidMount"),console.log(H()().format("YYYY-MM-DD hh:mm"))}},{key:"componentDidUpdate",value:function(){var e=this;console.log("componentDidUpdate"),!0===this.state.Update&&y.a.get(D+"/ShopData/getLastStock",{params:{shop:window.localStorage.getItem("shopname"),branch:window.localStorage.getItem("branch")}}).then(function(t){if(console.log(t.data),t.data!==[]){for(var a in t.data)t.data[a].stock=0,t.data[a].order=0,t.data[a].scrap=0;e.setState({data:t.data,Branch:window.localStorage.getItem("branch"),Update:!1})}else e.setState({data:"",Name:window.localStorage.getItem("branch"),Update:!1})}).catch(function(t){console.log(t),e.setState({data:"",Branch:window.localStorage.getItem("branch"),Update:!1})})}}]),t}(o.a.Component);var Ke=function(){return o.a.createElement(c.a,null,o.a.createElement("div",null,o.a.createElement(r.b,{path:"/",exact:!0,component:C}),o.a.createElement(r.b,{path:"/Main",component:ve}),o.a.createElement(r.b,{path:"/User",component:Be}),o.a.createElement(r.b,{path:"/Scrap",component:Ae})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Ke,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[324,1,2]]]);
//# sourceMappingURL=main.1afa7b9c.chunk.js.map